<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-12-04">

<title>Work with content blocks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="work-with-content-blocks_files/libs/clipboard/clipboard.min.js"></script>
<script src="work-with-content-blocks_files/libs/quarto-html/quarto.js"></script>
<script src="work-with-content-blocks_files/libs/quarto-html/popper.min.js"></script>
<script src="work-with-content-blocks_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="work-with-content-blocks_files/libs/quarto-html/anchor.min.js"></script>
<link href="work-with-content-blocks_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="work-with-content-blocks_files/libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="work-with-content-blocks_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="work-with-content-blocks_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="work-with-content-blocks_files/libs/bootstrap/bootstrap-abba8c2a7bf59ad0afd2a7907c827254.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="work-with-content-blocks_files/libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="work-with-content-blocks_files/libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script src="work-with-content-blocks_files/libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="work-with-content-blocks_files/libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="work-with-content-blocks_files/libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Work with content blocks</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 4, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Make edits to your model documentation, validation reports, or ongoing monitoring plans by adding or removing content blocks directly in the online editor.</p>
<section id="what-are-content-blocks" class="level2">
<h2 class="anchored" data-anchor-id="what-are-content-blocks">What are content blocks?</h2>
<p>Content blocks provide you with sections that are part of a template, and are used in model documentation, validation reports, and ongoing monitoring plans.</p>
<ul>
<li>You can think of these sections as an empty canvas that you fill in with text and test results.</li>
<li>Multiple sections are joined to create a longer document with a table of contents that has different heading and subheading levels, such as “1.,” “1.1.,” and so on.</li>
</ul>
<section id="content-block-types" class="level4">
<h4 class="anchored" data-anchor-id="content-block-types">Content block types</h4>
<dl>
<dt>simple text block</dt>
<dd>
Can be added anywhere on model documentation, validation reports, or ongoing monitoring plans and edited to include additional documentation in text format.
</dd>
<dt>test-driven block</dt>
<dd>
Can be within model documentation and ongoing monitoring plans to display one of the supported test results collected by the ValidMind Library.
</dd>
<dt>metric over time block</dt>
<dd>
Can be added within model documentation and ongoing monitoring plans to display one of the supported metric over time results collected by the library.
</dd>
</dl>
</section>
<section id="content-editing-toolbar" class="level3">
<h3 class="anchored" data-anchor-id="content-editing-toolbar">Content editing toolbar</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../../guide/model-documentation/content-editing-toolbar.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Content editing toolbar"><img src="../../guide/model-documentation/content-editing-toolbar.png" class="screenshot img-fluid figure-img" alt="A screenshot showing the content editing toolbar"></a></p>
<figcaption>Content editing toolbar</figcaption>
</figure>
</div>
<p>The content editing toolbar is a rich text editor that enables you to:</p>
<ul>
<li>Undo or redo changes</li>
<li>Format your text, including adding hyperlinks and code blocks</li>
<li>Insert LaTex formulas<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></li>
<li>Attach images via upload or URL</li>
</ul>
<p>You can also use the toolbar to suggest changes, save named versions of content, and leave comments.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<div class="callout callout-style-simple callout-none no-icon callout-titled" title="Stuck on where to start?">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Stuck on where to start?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use ValidMind to assist you with generating content via AI!<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
</div>
</div>
</section>
</section>
<section id="prerequisites" class="level2 attn">
<h2 class="anchored" data-anchor-id="prerequisites">Prerequisites</h2>
<ul class="task-list">
<li><label><input type="checkbox" checked=""><a href="../../guide/configuration/log-in-to-validmind.qmd">You are logged in to ValidMind.</a></label></li>
<li><label><input type="checkbox" checked="">The model you are documenting or validating is registered in the model inventory.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></label></li>
<li><label><input type="checkbox" checked="">You are a <span class="bubble"><i class="fa-solid fa-code" aria-label="code"></i> Developer</span> or <span class="bubble"><i class="fa-solid fa-circle-check" aria-label="circle-check"></i> Validator</span>, or assigned another role with sufficient permissions to perform the tasks in this guide.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></label></li>
</ul>
</section>
<section id="add-content-blocks" class="level2">
<h2 class="anchored" data-anchor-id="add-content-blocks">Add content blocks</h2>
<ol type="1">
<li><p>In the left sidebar, click <strong><i class="fa-solid fa-cubes" aria-label="cubes"></i> Model Inventory</strong>.</p></li>
<li><p>Select a model or find your model by applying a filter or searching for it.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p></li>
<li><p>In the left sidebar that appears for your model, click <strong><i class="fa-solid fa-book-open" aria-label="book-open"></i> Documentation</strong>, <strong><i class="fa-solid fa-shield" aria-label="shield"></i> Validation Report</strong>, or <strong><i class="fa-solid fa-desktop" aria-label="desktop"></i> Ongoing Monitoring</strong>.</p>
<p>You can now jump to any section of the model documentation, validation report, or ongoing monitoring plan by expanding the table of contents on the left and selecting the relevant section you would like to add content to, such as <strong>1.1 Model Overview</strong>.</p></li>
<li><p>Hover your mouse over the space where you want your new block to go until a horizontal dashed line with a <i class="fa-solid fa-square-plus" aria-label="square-plus"></i> sign appears that indicates you can insert a new block:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../../guide/model-documentation/add-content-block.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Adding a content block in the UI"><img src="../../guide/model-documentation/add-content-block.gif" class="screenshot img-fluid figure-img" style="width:90.0%" alt="A gif showing the process of adding a content block in the UI"></a></p>
<figcaption>Adding a content block in the UI</figcaption>
</figure>
</div></li>
<li><p>Click <i class="fa-solid fa-square-plus" aria-label="square-plus"></i> and then select one of the available options:</p>
<ul>
<li><strong>Text</strong> — Adds a new section with a blank content block. After the new content block has been added, click <i class="fa-solid fa-pencil" aria-label="pencil"></i> to edit the contents of the section like any other.</li>
<li><strong>Test-Driven</strong><a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> — Adds a new section with test results.</li>
<li><strong>Metric Over Time</strong><a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> — Adds a new section with metric over time results.</li>
</ul></li>
<li><p>After adding the block to your documentation, click on the text to make changes or add comments.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p></li>
</ol>
<section id="add-mathematical-formulas" class="level3">
<h3 class="anchored" data-anchor-id="add-mathematical-formulas">Add mathematical formulas</h3>
<p>While editing a simple text block, you can insert math equations using the editor:</p>
<ol type="1">
<li><p>Click <strong>√</strong> in the toolbar while editing a content block.</p></li>
<li><p>You can use the interface to type out the equation, or paste in a LaTeX formula:</p></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="mathtype-full-demo.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Inserting a mathematical formula using LaTex within a simple text block"><img src="mathtype-full-demo.gif" class="screenshot img-fluid figure-img" style="width:90.0%" alt="An animation that shows how to insert a mathematical formula using LaTex within a simple text block"></a></p>
<figcaption>Inserting a mathematical formula using LaTex within a simple text block</figcaption>
</figure>
</div>
<ol start="3" type="1">
<li>Click <strong>Insert</strong> to add the equation to your content block.</li>
</ol>
</section>
<section id="generate-text-with-ai-beta" class="level3">
<h3 class="anchored" data-anchor-id="generate-text-with-ai-beta">Generate Text with AI <sup><span class="smallcaps">beta</span></sup></h3>
<p>While editing a simple text block, you can have ValidMind assist you with generating content drafts:</p>
<ol type="1">
<li><p>Click <strong><i class="fa-solid fa-diamond" aria-label="diamond"></i> <sup><span class="smallcaps">beta</span></sup> (Generate Text with AI)</strong> in the toolbar while editing a content block.</p></li>
<li><p>Enter an optional prompt to guide the output, then click <strong><i class="fa-solid fa-check" aria-label="check"></i> Generate</strong> to compose a draft for review.</p></li>
<li><p>Review the draft composed by the ValidMind AI Content Builder for accuracy and relevance, then:</p>
<ul>
<li>Click <strong><i class="fa-solid fa-download" aria-label="download"></i> Accept Text</strong> to insert the draft into your content block.</li>
<li>Click <strong><i class="fa-solid fa-rotate" aria-label="rotate"></i> Try Again</strong> to regenerate a different draft.</li>
<li>Click <strong>Cancel</strong> to discard the draft and return to your documentation section.</li>
</ul></li>
<li><p>After you insert the AI-generated draft, click on the text box to make the necessary edits and adjustments to your copy:</p>
<ul>
<li>Ensure that content is in compliance with the quality guidelines outlined by your organization.</li>
<li>Use the content editing toolbar<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> just as you would with any other text block.</li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="generate-with-ai.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Generating content with AI within a simple text block"><img src="generate-with-ai.gif" class="screenshot img-fluid figure-img" style="width:90.0%" alt="An animation that showcases the Generate with AI feature within a simple text block"></a></p>
<figcaption>Generating content with AI within a simple text block</figcaption>
</figure>
</div>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>When generating content drafts with AI, accepted versions and edits are retained in your <i class="fa-solid fa-wifi" aria-label="wifi"></i> Model Activity<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a> just like other updates to your documentation, reports, or plans.</p>
</div>
</div>
</div>
</section>
</section>
<section id="remove-content-blocks" class="level2">
<h2 class="anchored" data-anchor-id="remove-content-blocks">Remove content blocks</h2>
<ol type="1">
<li><p>In the left sidebar, click <strong><i class="fa-solid fa-cubes" aria-label="cubes"></i> Model Inventory</strong>.</p></li>
<li><p>Select a model or find your model by applying a filter or searching for it.<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a></p></li>
<li><p>In the left sidebar that appears for your model, click <strong><i class="fa-solid fa-book-open" aria-label="book-open"></i> Documentation</strong>, <strong><i class="fa-solid fa-shield" aria-label="shield"></i> Validation Report</strong>, or <strong><i class="fa-solid fa-desktop" aria-label="desktop"></i> Ongoing Monitoring</strong>.</p>
<p>You can now jump to any section of the model documentation or validation report by expanding the table of contents on the left and selecting the relevant section, such as <strong>1.1 Model Overview</strong>.</p></li>
<li><p>Select the block you wish to remove from the model documentation.</p></li>
<li><p>Click on <i class="fa-solid fa-trash-can" aria-label="trash-can"></i> located in either one of these locations:</p>
<ul>
<li>In the toolbar for text blocks</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="remove-text-block.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="Deleting a content block via the text toolbar"><img src="remove-text-block.gif" class="screenshot img-fluid figure-img" alt="A gif showing the process of deleting a content block via the text toolbar"></a></p>
<figcaption>Deleting a content block via the text toolbar</figcaption>
</figure>
</div>
<ul>
<li>In the single-button toolbar for test-driven or metric over time blocks</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="remove-test-driven-block.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="Deleting a content block via the single-button toolbar for test-driven blocks"><img src="remove-test-driven-block.gif" class="screenshot img-fluid figure-img" alt="A gif showing the process of deleting a content block via the single-button toolbar for test-driven blocks"></a></p>
<figcaption>Deleting a content block via the single-button toolbar for test-driven blocks</figcaption>
</figure>
</div></li>
<li><p>After you confirm, the content block is removed.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Test-driven or metric over time blocks can be re-added later on but <strong>text blocks are currently deleted permanently</strong>.</p>
</div>
</div></li>
</ol>
</section>
<section id="whats-next" class="level2">
<h2 class="anchored" data-anchor-id="whats-next">What’s next</h2>
<ul>
<li><a href="../../guide/model-inventory/register-models-in-inventory.qmd">Register models in the inventory</a></li>
<li><a href="working-with-model-documentation.qmd">Working with model documentation</a></li>
<li><a href="../../guide/model-validation/preparing-validation-reports.qmd">Preparing validation reports</a></li>
<li><a href="../../guide/model-inventory/view-model-activity.qmd">View model activity</a></li>
</ul>
<!-- FOOTNOTES -->
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><a href="#add-mathematical-formulas">Add mathematical formuals</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><a href="collaborate-with-others.qmd">Collaborate with others</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a href="#generate-text-with-ai-beta">Generate with AI (BETA)</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><a href="../../guide/model-inventory/register-models-in-inventory.qmd">Register models in the inventory</a><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p><a href="../../guide/configuration/manage-permissions.qmd">Manage permissions</a><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p><a href="../../guide/model-inventory/working-with-model-inventory.qmd#search-filter-and-sort-models">Working with the model inventory</a><a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p><a href="../../developer/model-documentation/work-with-test-results.qmd">Work with test results</a><a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p><a href="../../guide/monitoring/work-with-metrics-over-time.qmd">Work with metrics over time</a><a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p><a href="../../guide/model-documentation/collaborate-with-others.qmd">Collaborate with others</a><a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p><a href="#content-editing-toolbar">Content editing toolbar</a><a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p><a href="../../guide/model-inventory/view-model-activity.qmd">View model activity</a><a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p><a href="../../guide/model-inventory/working-with-model-inventory.qmd#search-filter-and-sort-models">Working with the model inventory</a><a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>